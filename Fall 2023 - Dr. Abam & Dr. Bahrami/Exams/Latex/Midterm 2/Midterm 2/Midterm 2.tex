\input{../commons/style}



\شروع{نوشتار}

\سربرگ{آزمون میان‌ترم دوم}{۵ دی ۱۴۰۲}{۱۵۰ دقیقه}
\medskip


\مسئله{میانگان} [۱۵ نمره]

 آرایه $A$  شامل $n$ عدد مختلف است. حال می‌خواهیم آرایه $B$ را به این صورت پر کنیم که به ازای هر $i$، $B[i]$ برابر با میانه‌ی اعداد $A[1]$  تا $A[i]$  باشد. الگوریتمی از مرتبه‌ی $O(n\log n)$ برای این مسئله ارائه دهید.

\مسئله{چرخش و توازن}[۲۵ نمره]

در مورد درخت قرمز و سیاه به سوالات زیر پاسخ دهید.
\شروع{شمارش}[label=(\alph*)]
\فقره آیا می‌توان گره‌های هر درخت دودویی جست‌وجویی که ارتفاع آن حداکثر $2\log{n}$ است را با رنگ‌های قرمز و سیاه و طبق قواعد درخت قرمز و سیاه رنگ‌آمیزی کرد؟ (۵ نمره)
\فقره نشان دهید با عمل‌های چرخش به راست و چرخش به چپ می‌توان هر درخت دودویی جست‌وجویی را به هر درخت دودویی جست‌وجوی دیگری تبدیل کرد. (۱۰ نمره)
\فقره برای مسئله‌ی بخش قبل، الگوریتمی ارائه دهید که با حداکثر 
$\mathcal{O}(n\log{n})$  چرخش تبدیل را انجام دهد. 
(۱۰ نمره)
\پایان{شمارش}

\مسئله{درخت دودویی جستجو}[۲۰ نمره]


اعداد صحیح $x_1, \cdots, x_n$ را در یک درخت دودویی جستجو با ارتفاع $h$ ذخیره کرده‌ایم. فرض کنید هزینه جستجوی $x_i$ (تعداد مقایسه‌های لازم در درخت برای پیدا کردن $x_i$) برابر $c_i$ باشد. می دانیم $\sum_{i=1}^n c_i = \mathcal{O}(n\log n)$ است. درستی یا نادرستی گزاره‌های زیر با ذکر دلیل (مثال نقض یا اثبات) مشخص کنید.
\شروع{شمارش}[label=(\alph*)]
\فقره
$h=\mathcal{O}(\log n)$
\فقره
$h = \mathcal{O}(\sqrt{n \log n})$
\فقره
می‌توان مثالی زد که $h=\Omega(n)$ باشد.
\فقره
$h = \Omega(\sqrt{n})$
\پایان{شمارش}



\مسئله{بازسازی}[۲۰ نمره]


فرض کنید آرایه $A$ شامل یک جایگشت اعداد $1,\ldots, n$ باشد. مشخص کنید در کد زیر اگر به جای $X$‌  دستورهای \texttt{if} و \texttt{while} بگذاریم آیا عناصر حتما مرتب می‌شوند؟ دلیل خود را برای هر دو حالت بیان کنید.
\begin{LTR}
\begin{verbatim}
sort(A) {
    for i = 1 to n 
       X (A[i] <> i) 
         swap(A[i], A[A[i]])
}
\end{verbatim}
\end{LTR}


\مسئله{پیش زوجیت پویا} [۳۰ نمره]

در این مسئله قصد داریم داده‌ساختاری برای بررسی زوجیت یک بازه از عناصر در یک آرایه‌ی بیتی طراحی کنیم. این داده‌ساختار باید از اعمال زیر پشتیبانی کند:
\شروع{فقرات}
\فقره \texttt{initialize(n)}: ساخت آرایه‌ای به اندازه‌ی $ n $ و مقداردهی عناصر آن با صفر.
\فقره \texttt{flip(i)}: وارون کردن مقدار بیت $ i$ام.
\فقره \texttt{parity(i)}: بازگرداندن زوجیت عناصر تا عنصر $ i $ام.
\پایان{فقرات}
فرض می‌کنیم که عمل \texttt{initialize} در زمان $ \mathcal{O}(n) $ انجام می‌شود.
\شروع{شمارش}[label=(\alph*)]
\فقره داده‌ساختاری طراحی کنید که اعمال \texttt{flip(i)} و \texttt{parity(i)} در زمان $ \mathcal{O}(\log{n}) $ انجام شود. (۱۵ نمره)
\فقره به کمک درخت-بی داده‌ساختاری طراحی کنید که اعمال \texttt{flip(i)} و \texttt{parity(i)} در زمان $ \mathcal{O}(\log{n}/\log{\log{n}}) $ انجام شوند. همچنین می‌توانید پیش‌پردازشی به روال \texttt{initialize} اضافه کنید به طوری که مرتبه‌ی زمانی آن را تغییر ندهد. (۱۵ نمره)
\پایان{شمارش}
\پایان{نوشتار}
